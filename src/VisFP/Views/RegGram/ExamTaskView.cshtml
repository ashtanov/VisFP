@model VisFP.Models.RGViewModels.ExamRgProblemViewModel

@{
    ViewData["Title"] = Model.TaskTitle;
}
<div class="list-group">
    <span class="list-group-item" style="background-color:darkred; color:white; text-align:center">Контрольное задание</span>
</div>
<row>
    <div class="col-md-1" style="font-size:large"><strong>Задачи:</strong></div>
    <div class="col-md-11">
        <ul class="list-inline">
            @foreach (var problem in Model.OtherProblems)
            {
                if (Model.Id == problem.ProblemId)
                {
                    <li><button class="btn btn-sm btn-primary">@problem.TaskNumber</button></li>
                }
                else
                {
                    <li>
                        @{
                            var currentStatus = problem.State == ProblemState.Unfinished
                                                ? "testUnfinished"
                                                : problem.State == ProblemState.SuccessFinished
                                                    ? "testOk"
                                                    : "testFail";
                        }
                        <a asp-action="Task"
                           asp-route-id="@problem.TaskNumber"
                           asp-route-problemId="@problem.ProblemId"
                           class="btn btn-sm btn-default @currentStatus">@problem.TaskNumber</a>
                    </li>
                                }
                            }
        </ul>
    </div>
</row>
<div>
    <h3 style="margin-left:100px">@Model.TaskTitle</h3>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            <span>Алфавит</span>
        </dt>
        <dd>
            Терминалы: @Html.Raw(string.Join(", ", Model.Grammar.Alph.Terminals.Select(x => $"<b>{x}</b>")))
        </dd>
        <dd>
            Нетерминалы: @Html.Raw(string.Join(", ", Model.Grammar.Alph.NonTerminals.Select(x => $"<b>{x}</b>")))
        </dd>
        <dd>
            Начальное состояние: <b>@Model.Grammar.Alph.InitState</b>
        </dd>
    </dl>
</div>
<div>
    @{await Html.RenderPartialAsync("GraphView", Model);}
</div>
<dl class="dl-horizontal">
    <dt>
        @Html.DisplayNameFor(model => model.TaskText)
    </dt>
    <dd>
        @Html.Raw(Model.TaskText)
    </dd>
</dl>
@{ await Html.RenderPartialAsync("AcceptAnswerView",
                                                                new AnswerViewModel { TaskId = Model.Id, MaxAttemptsCount = Model.MaxAttempts, SymbolsCheckBox = Model.Grammar.Alph.NonTerminals, AnswerType = Model.AnswerType }); }